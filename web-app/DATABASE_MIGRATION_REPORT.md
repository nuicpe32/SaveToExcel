# ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï Foreign Key Relationships

**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:** 2025-10-01
**‡πÇ‡∏î‡∏¢:** Claude Code
**Database:** criminal_case_db (PostgreSQL 15)

---

## ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï

### ‚úÖ ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

| ‡∏ï‡∏≤‡∏£‡∏≤‡∏á | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ |
|------|----------------|-------|
| **bank_accounts** | **35 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£** | ‚úÖ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à |
| **suspects** | **1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£** | ‚úÖ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à |
| **‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î** | **36 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£** | ‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå |

---

## ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á bank_accounts

### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: **417 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£**
- ‡∏°‡∏µ case_id ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ criminal_case_id: **301 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£**
- case_id ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô: **108 case_id**

### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: **417 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£**
- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß (‡∏°‡∏µ criminal_case_id): **151 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£** (36.2%)
- ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á: **266 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£** (63.8%)

### ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï
- **‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: 35 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£**
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 116 ‚Üí 151 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï
```sql
ID: 2526 | case_id: 66041271    ‚Üí criminal_case_id: 269 | ‡∏Ñ‡∏î‡∏µ 151/2566
ID: 2525 | case_id: 68033127891 ‚Üí criminal_case_id: 248 | ‡∏Ñ‡∏î‡∏µ 940/2568
ID: 2523 | case_id: 680601843   ‚Üí criminal_case_id: 241 | ‡∏Ñ‡∏î‡∏µ 1174/2568
ID: 2522 | case_id: 651217027   ‚Üí criminal_case_id: 268 | ‡∏Ñ‡∏î‡∏µ 170/2566
ID: 2514 | case_id: 6809044200  ‚Üí criminal_case_id: 232 | ‡∏Ñ‡∏î‡∏µ 1382/2568
```

---

## ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á suspects

### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: **15 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£**
- ‡∏°‡∏µ case_id ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ criminal_case_id: **5 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£**
- case_id ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô: **4 case_id**

### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: **15 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£**
- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß (‡∏°‡∏µ criminal_case_id): **11 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£** (73.3%)
- ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á: **4 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£** (26.7%)

### ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï
- **‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£**
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 10 ‚Üí 11 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï
```sql
ID: 87 | case_id: 660625312  ‚Üí criminal_case_id: 270 | ‡∏Ñ‡∏î‡∏µ 134/2566 | ‡∏ô.‡∏™.‡∏≠‡∏£‡∏≠‡∏∏‡∏°‡∏≤ ‡∏à‡∏á‡πÄ‡∏¢‡πá‡∏ô‡∏Å‡∏•‡∏≤‡∏á
ID: 86 | case_id: 6804076987 ‚Üí criminal_case_id: 237 | ‡∏Ñ‡∏î‡∏µ 1275/2568 | ‡∏ô.‡∏™.‡∏ó‡∏±‡∏®‡∏ô‡∏µ‡∏¢‡πå ‡∏ö‡∏∏‡∏ç‡∏ä‡∏±‡∏¢‡∏™‡∏á‡∏Ñ‡πå
ID: 85 | case_id: 6804076987 ‚Üí criminal_case_id: 237 | ‡∏Ñ‡∏î‡∏µ 1275/2568 | ‡∏ô‡∏≤‡∏¢‡∏≠‡∏î‡∏∏‡∏•‡∏¢‡πå ‡∏î‡∏ß‡∏á‡∏≠‡πà‡∏≠‡∏ô
ID: 84 | case_id: 6804076987 ‚Üí criminal_case_id: 237 | ‡∏Ñ‡∏î‡∏µ 1275/2568 | ‡∏ô‡∏≤‡∏á‡∏™‡∏∏‡∏Å‡∏±‡∏ç‡∏ç‡∏≤ ‡∏´‡∏ô‡πà‡∏≠‡πÅ‡∏Å‡πâ‡∏ß
ID: 83 | case_id: 68061214466 ‚Üí criminal_case_id: 238 | ‡∏Ñ‡∏î‡∏µ 1257/2568 | ‡∏ô‡∏≤‡∏¢‡∏≠‡∏≤‡∏ô‡∏±‡∏ô‡∏ó‡πå ‡πÅ‡∏ã‡πà‡πÅ‡∏ï‡πâ
```

---

## ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á

### bank_accounts: 266 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á:**
1. **case_id ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á criminal_cases** - ‡∏Ñ‡∏î‡∏µ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
2. **case_id ‡πÄ‡∏õ‡πá‡∏ô "nan"** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏µ‡∏¢ (11 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)
3. **case_id format ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô** - ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏î ‡πÄ‡∏•‡∏Ç‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤

**Top 10 case_id ‡∏ó‡∏µ‡πà‡∏´‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠:**
| case_id | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ |
|---------|-------------|----------|
| 660511087 | 14 | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö |
| 660511362 | 13 | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö |
| 66086233 | 12 | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö |
| **nan** | 11 | ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏µ‡∏¢ |
| 66034076 | 8 | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö |
| 66082539 | 8 | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö |
| 66106931 | 7 | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö |
| 660910566 | 7 | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö |
| 68091921756 | 7 | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö |
| 66025491 | 7 | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö |

### suspects: 4 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£

‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏°‡∏≤‡∏Å - ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏õ‡πá‡∏ô case_id ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á criminal_cases

---

## SQL Commands ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

### 1. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï bank_accounts
```sql
UPDATE bank_accounts ba
SET criminal_case_id = cc.id
FROM criminal_cases cc
WHERE ba.case_id = cc.case_id
  AND ba.criminal_case_id IS NULL
  AND ba.case_id IS NOT NULL
  AND ba.case_id != '';
```
**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:** UPDATE 35

### 2. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï suspects
```sql
UPDATE suspects s
SET criminal_case_id = cc.id
FROM criminal_cases cc
WHERE s.case_id = cc.case_id
  AND s.criminal_case_id IS NULL
  AND s.case_id IS NOT NULL
  AND s.case_id != '';
```
**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:** UPDATE 1

---

## ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ Database ‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï

### Linkage Rate (‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Table            ‚îÇ Total  ‚îÇ Linked   ‚îÇ Unlinked   ‚îÇ Rate     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ bank_accounts    ‚îÇ 417    ‚îÇ 151      ‚îÇ 266        ‚îÇ 36.2%    ‚îÇ
‚îÇ suspects         ‚îÇ 15     ‚îÇ 11       ‚îÇ 4          ‚îÇ 73.3%    ‚îÇ
‚îÇ post_arrests     ‚îÇ 12     ‚îÇ 12       ‚îÇ 0          ‚îÇ 100.0%   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Total Child Recs ‚îÇ 444    ‚îÇ 174      ‚îÇ 270        ‚îÇ 39.2%    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Parent Records: 47 criminal_cases
```

---

## ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ

### 1. ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• "nan" (11 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)
```sql
-- ‡∏´‡∏≤ records ‡∏ó‡∏µ‡πà‡∏°‡∏µ case_id ‡πÄ‡∏õ‡πá‡∏ô 'nan'
SELECT id, document_number, bank_name, account_number
FROM bank_accounts
WHERE case_id = 'nan';

-- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£:
-- 1) ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å ‡∏´‡∏£‡∏∑‡∏≠
-- 2) ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ case_id ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞ UPDATE
```

### 2. üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö case_id format
```sql
-- ‡∏´‡∏≤ case_id ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÅ‡∏ï‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô
SELECT DISTINCT
    ba.case_id as bank_case_id,
    cc.case_id as criminal_case_id,
    similarity(ba.case_id, cc.case_id) as similarity_score
FROM bank_accounts ba
CROSS JOIN criminal_cases cc
WHERE ba.criminal_case_id IS NULL
  AND ba.case_id IS NOT NULL
  AND similarity(ba.case_id, cc.case_id) > 0.8
ORDER BY similarity_score DESC;
```

### 3. üìù ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏î‡∏µ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î‡∏´‡∏≤‡∏¢
```sql
-- ‡∏´‡∏≤ case_id ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á criminal_cases
SELECT DISTINCT case_id, COUNT(*) as record_count
FROM bank_accounts
WHERE criminal_case_id IS NULL
  AND case_id IS NOT NULL
  AND case_id != ''
  AND case_id != 'nan'
GROUP BY case_id
ORDER BY record_count DESC;

-- ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏î‡∏µ‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏≤‡∏° case_id ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ
```

### 4. üßπ Clean Up Redundant Fields (‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß)
```sql
-- ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å criminal_case_id ‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô:
ALTER TABLE bank_accounts DROP COLUMN case_id;
ALTER TABLE bank_accounts DROP COLUMN complainant;
ALTER TABLE bank_accounts DROP COLUMN victim_name;

-- ‡πÉ‡∏ä‡πâ JOIN ‡πÅ‡∏ó‡∏ô:
SELECT ba.*, cc.case_id, cc.complainant, cc.victim_name
FROM bank_accounts ba
JOIN criminal_cases cc ON ba.criminal_case_id = cc.id;
```

---

## Verification Queries

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
```sql
-- 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ case_id ‡∏Å‡∏±‡∏ö criminal_case_id ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô
SELECT
    ba.id,
    ba.case_id as ba_case_id,
    cc.case_id as cc_case_id,
    CASE WHEN ba.case_id = cc.case_id THEN '‚úÖ' ELSE '‚ùå' END as match
FROM bank_accounts ba
JOIN criminal_cases cc ON ba.criminal_case_id = cc.id
WHERE ba.case_id != cc.case_id;

-- 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö orphaned records (FK ‡∏ä‡∏µ‡πâ‡πÑ‡∏õ id ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏à‡∏£‡∏¥‡∏á)
SELECT ba.*
FROM bank_accounts ba
LEFT JOIN criminal_cases cc ON ba.criminal_case_id = cc.id
WHERE ba.criminal_case_id IS NOT NULL
  AND cc.id IS NULL;
```

---

## ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á

| ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà | ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ | ‡∏ú‡∏π‡πâ‡∏ó‡∏≥ | ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå |
|--------|--------------|-------|---------|
| 2025-10-01 | Migration: Link bank_accounts.criminal_case_id | Claude | ‚úÖ 35 records |
| 2025-10-01 | Migration: Link suspects.criminal_case_id | Claude | ‚úÖ 1 record |

---

## ‡∏™‡∏£‡∏∏‡∏õ

‚úÖ **‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå**
- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï Foreign Key relationships ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î **36 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£**
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å **126 ‚Üí 162 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£** (‡πÄ‡∏û‡∏¥‡πà‡∏° 28.6%)
- ‡πÑ‡∏°‡πà‡∏°‡∏µ data loss ‡∏´‡∏£‡∏∑‡∏≠ corruption

‚ö†Ô∏è **‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á**
- ‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• **270 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£** (60.8%) ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á
- ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å case_id ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á criminal_cases
- ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏î‡∏µ‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç case_id ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

üìä **Database Integrity**
- Foreign Key constraints ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
- Cascade delete rules active
- No orphaned records detected
