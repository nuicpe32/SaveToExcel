# 📋 รายการหน้าจอทั้งหมดในระบบ CCMS

## 🔐 หน้าจอที่ไม่ต้อง Login

### 1. **หน้า Login**
- **ไฟล์:** `LoginPage.tsx`
- **URL:** `/login` หรือ `http://localhost:3001/login`
- **ชื่อเรียก:** "หน้า Login" / "หน้าเข้าสู่ระบบ"
- **คำสำคัญ:** Login, เข้าสู่ระบบ, ล็อกอิน
- **ฟังก์ชัน:**
  - Login ด้วย Username และ Password
  - ปุ่ม "สมัครสมาชิก" (เปิด RegistrationModal)
  - แสดงข้อความ Error เมื่อ login ไม่สำเร็จ

---

## 🏠 หน้าจอหลัก (ต้อง Login)

### 2. **หน้าคดีอาญาในความรับผิดชอบ** (Dashboard)
- **ไฟล์:** `DashboardPage.tsx`
- **URL:** `/` หรือ `http://localhost:3001/`
- **ชื่อเรียก:** "หน้าแดชบอร์ด" / "หน้าคดีอาญาในความรับผิดชอบ" / "หน้าภาพรวมคดี"
- **เมนู:** "คดีอาญาในความรับผิดชอบ" > "ภาพรวมคดี"
- **คำสำคัญ:** Dashboard, คดีอาญา, ภาพรวม
- **ฟังก์ชัน:**
  - แสดงตารางคดีทั้งหมด (ของตนเอง หรือทั้งหมดถ้าเป็น admin)
  - แสดงยศ ชื่อ ตำแหน่ง ของผู้ใช้ที่ login
  - คลิกที่เลขคดีเพื่อดูรายละเอียด
  - มี Tabs:
    - **Tab "บัญชีธนาคารที่เกี่ยวข้อง"**
      - แสดงตารางบัญชีธนาคาร
      - เพิ่ม/แก้ไข/ลบ บัญชีธนาคาร
      - ปริ้นหมายเรียกธนาคาร และซอง
    - **Tab "ผู้ต้องหาที่เกี่ยวข้อง"**
      - แสดงตารางผู้ต้องหา
      - เพิ่ม/แก้ไข/ลบ ผู้ต้องหา
      - ปริ้นหมายเรียกผู้ต้องหา และซอง
      - **เปลี่ยนสถานะตอบกลับ** (Switch: ตอบกลับแล้ว/ยังไม่ตอบกลับ)

---

## 📁 หน้าจอย่อยของคดีอาญา

### 3. **หน้าบัญชีธนาคาร**
- **ไฟล์:** `BankAccountsPage.tsx`
- **URL:** `/bank-accounts` หรือ `http://localhost:3001/bank-accounts`
- **ชื่อเรียก:** "หน้าบัญชีธนาคาร" / "หน้าจัดการบัญชีธนาคาร"
- **เมนู:** "คดีอาญาในความรับผิดชอบ" > "บัญชีธนาคาร"
- **คำสำคัญ:** บัญชีธนาคาร, Bank Accounts
- **ฟังก์ชัน:**
  - แสดงตารางบัญชีธนาคารทั้งหมด (ของตนเอง หรือทั้งหมดถ้าเป็น admin)
  - Columns: เลขที่หนังสือ, ลงวันที่, ธนาคาร, เลขที่บัญชี, ชื่อบัญชี, สถานะ
  - คลิกที่เลขที่หนังสือเพื่อดูรายละเอียด (Drawer)
  - **Detail Drawer มี 2 Tabs:**
    - **Tab "ข้อมูลบัญชี":** เลขที่หนังสือ, ลงวันที่, ธนาคาร, เลขที่บัญชี, ชื่อบัญชี, ช่วงเวลาที่ขอข้อมูล
    - **Tab "ผู้เสียหาย/คดี":** ผู้ร้องทุกข์/ผู้เสียหาย, เลขคดี
  - Header ของ Drawer: แสดงสถานะตอบกลับ

### 4. **หน้าหมายเรียกผู้ต้องหา**
- **ไฟล์:** `SuspectsPage.tsx`
- **URL:** `/suspects` หรือ `http://localhost:3001/suspects`
- **ชื่อเรียก:** "หน้าผู้ต้องหา" / "หน้าหมายเรียกผู้ต้องหา"
- **เมนู:** "คดีอาญาในความรับผิดชอบ" > "หมายเรียกผู้ต้องหา"
- **คำสำคัญ:** ผู้ต้องหา, หมายเรียก, Suspects
- **ฟังก์ชัน:**
  - แสดงตารางผู้ต้องหาทั้งหมด (ของตนเอง หรือทั้งหมดถ้าเป็น admin)
  - Columns: เลขที่หนังสือ, ลงวันที่, ชื่อ-นามสกุล, ที่อยู่ ผตห., พื้นที่ สภ./สน., สถานะ
  - คลิกที่เลขที่หนังสือเพื่อดูรายละเอียด (Drawer)
  - **Detail Drawer มี 2 Tabs:**
    - **Tab "ข้อมูลคดี":** 
      - ส่วนข้อมูลผู้ต้องหา: ชื่อผู้ต้องหา, เลขบัตรประชาชน, ที่อยู่, วันที่นัดหมาย
      - ส่วนข้อมูลผู้เสียหาย/คดี: ผู้เสียหาย, เลขเคสไอดี
    - **Tab "หน่วยรับผิดชอบ":** สภ., จังหวัด, ที่อยู่ สภ.
  - Header ของ Drawer: แสดงสถานะตอบกลับ

---

## 📝 หน้าจอจัดการคดี

### 5. **หน้าเพิ่มคดีใหม่**
- **ไฟล์:** `AddCriminalCasePage.tsx`
- **URL:** `/add-criminal-case` หรือ `http://localhost:3001/add-criminal-case`
- **ชื่อเรียก:** "หน้าเพิ่มคดี" / "หน้าสร้างคดีใหม่"
- **คำสำคัญ:** เพิ่มคดี, สร้างคดี, Add Case
- **ฟังก์ชัน:**
  - ฟอร์มสร้างคดีใหม่
  - กรอกข้อมูลคดี: เลขคดี, ผู้ร้องทุกข์, ผู้เสียหาย, ข้อหา, ประเภทคดี, etc.
  - Upload PDF ทร.14 เพื่อแกะข้อมูลอัตโนมัติ

### 6. **หน้าแก้ไขคดี**
- **ไฟล์:** `EditCriminalCasePage.tsx`
- **URL:** `/edit-criminal-case/:id` หรือ `http://localhost:3001/edit-criminal-case/123`
- **ชื่อเรียก:** "หน้าแก้ไขคดี" / "หน้าแก้ไขข้อมูลคดี"
- **คำสำคัญ:** แก้ไขคดี, Edit Case
- **ฟังก์ชัน:**
  - ฟอร์มแก้ไขข้อมูลคดี
  - โหลดข้อมูลคดีที่มีอยู่
  - อัพเดตข้อมูลคดี

### 7. **หน้ารายละเอียดคดี**
- **ไฟล์:** `CriminalCaseDetailPage.tsx`
- **URL:** `/cases/:id` หรือ `http://localhost:3001/cases/123`
- **ชื่อเรียก:** "หน้ารายละเอียดคดี" / "หน้าดูรายละเอียดคดี"
- **คำสำคัญ:** รายละเอียดคดี, Case Detail
- **ฟังก์ชัน:**
  - แสดงรายละเอียดคดีแบบอ่านอย่างเดียว
  - แสดงข้อมูลคดีทั้งหมด

---

## 👥 หน้าจอจัดการผู้ใช้ (Admin Only)

### 8. **หน้าจัดการผู้ใช้**
- **ไฟล์:** `AdminUsersPage.tsx`
- **URL:** `/admin/users` หรือ `http://localhost:3001/admin/users`
- **ชื่อเรียก:** "หน้าจัดการผู้ใช้" / "หน้าบริหารผู้ใช้" / "หน้า Admin Users"
- **เมนู:** "จัดการผู้ใช้" (เฉพาะ Admin)
- **คำสำคัญ:** จัดการผู้ใช้, Admin, User Management
- **ฟังก์ชัน:**
  - มี 2 Tabs:
    - **Tab "รออนุมัติ":** แสดงผู้ใช้ที่รอการอนุมัติ, มีปุ่ม อนุมัติ/ปฏิเสธ
    - **Tab "ผู้ใช้ทั้งหมด":** แสดงผู้ใช้ทั้งหมด, มีปุ่ม ล็อค/ปลดล็อค, เปิด/ปิดใช้งาน
  - Columns: ชื่อผู้ใช้, ข้อมูลส่วนตัว (ยศ, ชื่อ-สกุล, ตำแหน่ง, โทร), สิทธิ์ที่ขอ/สิทธิ์ปัจจุบัน, สถานะ

---

## 🔔 Modal Components (ป๊อปอัพ)

### M1. **Modal เพิ่ม/แก้ไข บัญชีธนาคาร**
- **ไฟล์:** `BankAccountFormModal.tsx`
- **ชื่อเรียก:** "Modal บัญชีธนาคาร" / "ฟอร์มบัญชีธนาคาร"
- **เปิดจาก:** หน้าแดชบอร์ด > Tab "บัญชีธนาคารที่เกี่ยวข้อง" > ปุ่ม "เพิ่มบัญชีธนาคาร" หรือ "แก้ไข"
- **คำสำคัญ:** Modal บัญชีธนาคาร, Bank Account Modal
- **ฟังก์ชัน:**
  - ฟอร์มเพิ่ม/แก้ไข บัญชีธนาคาร
  - ฟิลด์: เลขที่หนังสือ, ลงวันที่, ธนาคาร, เลขที่บัญชี, ชื่อบัญชี, ช่วงเวลา, วันที่ส่ง, สถานะตอบกลับ

### M2. **Modal เพิ่ม/แก้ไข ผู้ต้องหา**
- **ไฟล์:** `SuspectFormModal.tsx`
- **ชื่อเรียก:** "Modal ผู้ต้องหา" / "ฟอร์มผู้ต้องหา" / "Modal แก้ไขผู้ต้องหา"
- **เปิดจาก:** หน้าแดชบอร์ด > Tab "ผู้ต้องหาที่เกี่ยวข้อง" > ปุ่ม "เพิ่มผู้ต้องหา" หรือ "แก้ไข"
- **คำสำคัญ:** Modal ผู้ต้องหา, Suspect Modal, ฟอร์มผู้ต้องหา
- **ฟังก์ชัน:**
  - ฟอร์มเพิ่ม/แก้ไข ผู้ต้องหา
  - ฟิลด์: 
    - **ข้อมูลเอกสาร:** เลขที่หนังสือ, ลงวันที่
    - **ข้อมูลผู้ต้องหา:** ชื่อ-สกุล, เลขบัตรประชาชน, ที่อยู่
    - **สถานีตำรวจที่รับผิดชอบ:** สภ., จังหวัด, ที่อยู่ สภ. (มีปุ่มค้นหาจากที่อยู่ผู้ต้องหา)
    - **วันที่และเวลานัดหมาย:** วันที่นัดหมาย, เวลานัดหมาย
    - **สถานะ:** สถานะผลหมายเรียก (Switch: ตอบกลับแล้ว/ยังไม่ตอบกลับ) ⭐
  - Upload PDF ทร.14 เพื่อแกะข้อมูลอัตโนมัติ

### M3. **Modal สมัครสมาชิก**
- **ไฟล์:** `RegistrationModal.tsx`
- **ชื่อเรียก:** "Modal สมัครสมาชิก" / "ฟอร์มสมัครสมาชิก"
- **เปิดจาก:** หน้า Login > ปุ่ม "สมัครสมาชิก"
- **คำสำคัญ:** สมัครสมาชิก, Registration, ลงทะเบียน
- **ฟังก์ชัน:**
  - ฟอร์มสมัครสมาชิกใหม่
  - ฟิลด์: ยศ, ชื่อ-สกุล, ตำแหน่ง, อีเมล์, โทรศัพท์, ID Line, สิทธิ์ (Checkboxes), Username, Password

### M4. **Modal ค้นหาสถานีตำรวจ**
- **ไฟล์:** `PoliceStationSearchModal.tsx`
- **ชื่อเรียก:** "Modal ค้นหาสถานีตำรวจ" / "ค้นหาสถานีตำรวจ"
- **เปิดจาก:** Modal ผู้ต้องหา > ปุ่ม "ค้นหาสถานีตำรวจจากที่อยู่"
- **คำสำคัญ:** ค้นหาสถานีตำรวจ, Police Station Search
- **ฟังก์ชัน:**
  - ค้นหาสถานีตำรวจจาก Master Data
  - แสดงผลลัพธ์การค้นหา
  - เลือกสถานีตำรวจแล้วกลับไปกรอกในฟอร์มผู้ต้องหา

---

## 📊 สรุปตามหน้าที่การใช้งาน

### สำหรับการสื่อสาร ให้ใช้ชื่อตามนี้:

#### **หน้าจอหลัก:**
1. **"หน้า Login"** = หน้าเข้าสู่ระบบ
2. **"หน้าแดชบอร์ด"** หรือ **"หน้าภาพรวมคดี"** = หน้าหลักที่แสดงตารางคดี พร้อม Tabs ต่างๆ
3. **"หน้าบัญชีธนาคาร"** = `/bank-accounts` หน้าจัดการบัญชีธนาคาร
4. **"หน้าผู้ต้องหา"** หรือ **"หน้าหมายเรียกผู้ต้องหา"** = `/suspects` หน้าจัดการผู้ต้องหา
5. **"หน้าจัดการผู้ใช้"** = `/admin/users` หน้า Admin จัดการผู้ใช้

#### **Modal/Popup:**
1. **"Modal บัญชีธนาคาร"** = ป๊อปอัพเพิ่ม/แก้ไขบัญชีธนาคาร
2. **"Modal ผู้ต้องหา"** หรือ **"ฟอร์มผู้ต้องหา"** = ป๊อปอัพเพิ่ม/แก้ไขผู้ต้องหา ⭐ (มี Switch สถานะตอบกลับ)
3. **"Modal สมัครสมาชิก"** = ป๊อปอัพสมัครสมาชิก
4. **"Modal ค้นหาสถานีตำรวจ"** = ป๊อปอัพค้นหาสถานีตำรวจ

#### **Tabs ในหน้าแดชบอร์ด:**
1. **"Tab บัญชีธนาคารที่เกี่ยวข้อง"** = แสดงตารางบัญชีธนาคารในคดีที่เลือก
2. **"Tab ผู้ต้องหาที่เกี่ยวข้อง"** = แสดงตารางผู้ต้องหาในคดีที่เลือก ⭐

#### **Detail Drawer (ใน BankAccountsPage):**
1. **"Detail Drawer บัญชีธนาคาร"** 
   - Tab "ข้อมูลบัญชี"
   - Tab "ผู้เสียหาย/คดี"

#### **Detail Drawer (ใน SuspectsPage):**
1. **"Detail Drawer ผู้ต้องหา"**
   - Tab "ข้อมูลคดี"
   - Tab "หน่วยรับผิดชอบ"

---

## 🎯 ตัวอย่างการสื่อสาร

### ตอนนี้ ผู้ใช้สามารถอ้างถึงหน้าได้ดังนี้:

#### **ตัวอย่างที่ดี:**
- ✅ "ในหน้าแดชบอร์ด Tab ผู้ต้องหาที่เกี่ยวข้อง"
- ✅ "ใน Modal ผู้ต้องหา ที่มี Switch สถานะตอบกลับ"
- ✅ "ในหน้าบัญชีธนาคาร (/bank-accounts)"
- ✅ "ใน Detail Drawer บัญชีธนาคาร Tab ข้อมูลบัญชี"
- ✅ "ในหน้าจัดการผู้ใช้ Tab รออนุมัติ"

#### **สำหรับปัญหาที่ผู้ใช้เพิ่งแจ้งมา:**
- **"ในหน้าจอ ผู้ต้องหาที่เกี่ยวข้อง เมื่อเปลี่ยน สถานะ เป็นตอบกลับแล้ว"**
  - หมายถึง: **หน้าแดชบอร์ด > Tab "ผู้ต้องหาที่เกี่ยวข้อง" > คลิก "แก้ไข" > เปิด Modal ผู้ต้องหา > เปลี่ยน Switch "สถานะผลหมายเรียก"**

---

## 📁 สรุปไฟล์ทั้งหมด

### **Pages (8 ไฟล์):**
1. `LoginPage.tsx` - หน้า Login
2. `DashboardPage.tsx` - หน้าแดชบอร์ด/ภาพรวมคดี ⭐ (มี Tabs: บัญชีธนาคารที่เกี่ยวข้อง, ผู้ต้องหาที่เกี่ยวข้อง)
3. `BankAccountsPage.tsx` - หน้าบัญชีธนาคาร
4. `SuspectsPage.tsx` - หน้าผู้ต้องหา
5. `AddCriminalCasePage.tsx` - หน้าเพิ่มคดี
6. `EditCriminalCasePage.tsx` - หน้าแก้ไขคดี
7. `CriminalCaseDetailPage.tsx` - หน้ารายละเอียดคดี
8. `AdminUsersPage.tsx` - หน้าจัดการผู้ใช้ (Admin)

### **Modals (4 ไฟล์):**
1. `BankAccountFormModal.tsx` - Modal เพิ่ม/แก้ไข บัญชีธนาคาร
2. `SuspectFormModal.tsx` - Modal เพิ่ม/แก้ไข ผู้ต้องหา ⭐ (มี Switch สถานะตอบกลับ)
3. `RegistrationModal.tsx` - Modal สมัครสมาชิก
4. `PoliceStationSearchModal.tsx` - Modal ค้นหาสถานีตำรวจ

### **Layout:**
- `MainLayout.tsx` - Layout หลัก (Sidebar Menu + Header)

---

## 🔍 เคล็ดลับการอ้างอิง

### **เมื่อต้องการแก้ไขหน้าใด ให้บอก:**
1. **ชื่อหน้า** (เช่น "หน้าแดชบอร์ด", "Modal ผู้ต้องหา")
2. **ส่วนไหนในหน้า** (เช่น "Tab ผู้ต้องหาที่เกี่ยวข้อง", "คอลัมน์สถานะ")
3. **อะไรที่ต้องแก้** (เช่น "เปลี่ยนสีจากส้มเป็นแดง", "เพิ่มคอลัมน์ใหม่")

### **ตัวอย่าง:**
- ✅ "ในหน้าแดชบอร์ด Tab ผู้ต้องหาที่เกี่ยวข้อง ให้เปลี่ยนคอลัมน์สถานะจากส้มเป็นแดง"
- ✅ "ใน Modal ผู้ต้องหา ที่มี Switch สถานะตอบกลับ เมื่อ save ไม่บันทึก"
- ✅ "ในหน้าบัญชีธนาคาร ให้เพิ่มคอลัมน์ลงวันที่"

---

## 📌 หมายเหตุสำคัญ

### **⭐ สำหรับการเปลี่ยนสถานะผู้ต้องหา:**
- **หน้าที่ใช้:** หน้าแดชบอร์ด (DashboardPage.tsx)
- **Tab:** "ผู้ต้องหาที่เกี่ยวข้อง"
- **Modal:** SuspectFormModal.tsx
- **Switch:** "สถานะผลหมายเรียก" (ตอบกลับแล้ว/ยังไม่ตอบกลับ)
- **การแก้ไขล่าสุด:** 
  - เพิ่ม `reply_status` ใน `SuspectUpdate` schema (Backend)
  - เพิ่ม `reply_status` ใน payload (Frontend)
  - ตั้งค่า `reply_status` อย่างชัดเจนเมื่อแก้ไข

### **🔐 สิทธิ์การเข้าถึง:**
- **หน้าทั่วไป:** ทุกคนที่ login แล้วเข้าได้
- **หน้าจัดการผู้ใช้:** เฉพาะ Admin เท่านั้น
- **การกรองข้อมูล:** 
  - Admin เห็นคดีทั้งหมด
  - User ทั่วไปเห็นเฉพาะคดีของตนเอง (owner_id)

---

ตอนนี้เรามีรายการหน้าจอที่ชัดเจนแล้วครับ! 🎉

สามารถใช้อ้างอิงได้เลยว่าต้องการแก้ไขหน้าไหน ส่วนไหน
